
<!DOCTYPE html>
<html>
<head>
    <title>Deep Research Agent - Workflow Visualization</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; }
        .mermaid { text-align: center; margin: 20px 0; }
        .info { background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 20px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>🔍 Deep Research Agent - StateGraph Visualization</h1>
        
        <div class="info">
            <h3>📊 Workflow Overview</h3>
            <p>This diagram shows the complete flow of the Deep Research Agent:</p>
            <ul>
                <li><strong>Query Generation:</strong> Breaks down user questions into targeted search queries</li>
                <li><strong>Web Search:</strong> Executes parallel searches using Gemini's native capabilities</li>
                <li><strong>Reflection:</strong> Analyzes completeness and determines if more research is needed</li>
                <li><strong>Answer Generation:</strong> Synthesizes comprehensive answers with citations</li>
            </ul>
        </div>
        
        <div class="mermaid">
%%{init: {'flowchart': {'curve': 'linear'}}}%%
graph TD;
    START([__start__]):::first
    GQ[generate_queries<br/>📝 Generate Search Queries]
    WS[web_search<br/>🔍 Web Search<br/>Parallel Execution]
    AR[aggregate_results<br/>📊 Aggregate Results]
    RF[reflection<br/>🤔 Reflect on Results]
    AG[answer_generation<br/>📋 Generate Answer]
    END([__end__]):::last

    START --> GQ
    GQ --> WS
    WS --> AR
    AR --> RF
    RF -->|sufficient| AG
    RF -->|need more| GQ
    AG --> END

    classDef default fill:#f2f0ff,line-height:1.2
    classDef first fill-opacity:0
    classDef last fill:#bfb6fc
        </div>
        
        <div class="info">
            <h3>🛠️ Technical Details</h3>
            <p><strong>Graph Type:</strong> LangGraph StateGraph</p>
            <p><strong>State Management:</strong> TypedDict with proper annotations</p>
            <p><strong>Parallel Execution:</strong> Web searches run concurrently using Send</p>
            <p><strong>Conditional Looping:</strong> Reflection can loop back for more research</p>
        </div>
    </div>
    
    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>
</body>
</html>
